/**
 * Most Visible v1.4.0
 *
 * @author Andy Palmer <andy@andypalmer.me>
 * @license MIT
 */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(e):e.mostVisible=t(e)}("undefined"!=typeof self?self:this,function(e){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t).getMostVisible();"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=e,this.options=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}({},n.defaults,t)}return n.defaults={percentage:!1,offset:0},n.prototype={getMostVisible:function(){var i=document.documentElement.clientHeight,o=this;return Array.prototype.reduce.call(this.elements,function(e,t){var n=o.getVisibleHeight(t,i);return n>e[0]?[n,t]:e},[0,null])[1]},getVisibleHeight:function(e,t){var n=e.getBoundingClientRect(),i=n.top-this.options.offset,o=n.bottom-this.options.offset,s=n.bottom-n.top,r=0<=i&&i<t,f=0<o&&o<t,u=0;if(r&&f)u=s;else if(r)u=t-n.top;else if(f)u=o;else if(t<s&&i<0){var l=Math.abs(i);l<s&&(u=s-l)}return this.options.percentage?u/s*100:u}},n.makeJQueryPlugin=function(e){e&&(e.fn.mostVisible=function(e){var t=new n(this.get(),e);return this.filter(t.getMostVisible())})},n.makeJQueryPlugin(e.jQuery),n});